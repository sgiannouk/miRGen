{% extends 'base.html' %}

{% block title %}Download Data - miRGen v5{% endblock %}

{% block content %}
<!-- Download Header -->
<section class="bg-light py-4">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h1 class="h3 mb-3">Download miRGen Data</h1>
                <p class="text-muted">Access our comprehensive miRNA database in various formats for your research needs.</p>
            </div>
        </div>
    </div>
</section>

<!-- Download Options -->
<section class="py-4">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <!-- Complete Database -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-database me-2"></i>Complete Database
                        </h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-3">Download the entire miRGen v5 database in your preferred format.</p>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="d-grid">
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-file-csv me-2"></i>CSV Format
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="d-grid">
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-file-excel me-2"></i>Excel Format
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="d-grid">
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-file-code me-2"></i>JSON Format
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Specific Data Types -->
                <div class="row g-4">
                    <!-- miRNAs -->
                    <div class="col-md-6">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center p-4">
                                <div class="feature-icon mb-3">
                                    <i class="fas fa-microscope text-primary fa-3x"></i>
                                </div>
                                <h5 class="card-title fw-bold">miRNA Data</h5>
                                <p class="card-text text-muted mb-4">
                                    Complete miRNA sequences, annotations, and metadata for all species.
                                </p>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-primary">
                                        <i class="fas fa-download me-2"></i>Download miRNAs
                                    </button>
                                    <small class="text-muted">~2.5M entries, 50+ species</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Target Genes -->
                    <div class="col-md-6">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center p-4">
                                <div class="feature-icon mb-3">
                                    <i class="fas fa-gene text-primary fa-3x"></i>
                                </div>
                                <h5 class="card-title fw-bold">Target Genes</h5>
                                <p class="card-text text-muted mb-4">
                                    Target gene information with miRNA binding predictions and validation data.
                                </p>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-primary">
                                        <i class="fas fa-download me-2"></i>Download Targets
                                    </button>
                                    <small class="text-muted">~10M predictions, experimental validation</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Expression Data -->
                    <div class="col-md-6">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center p-4">
                                <div class="feature-icon mb-3">
                                    <i class="fas fa-chart-line text-primary fa-3x"></i>
                                </div>
                                <h5 class="card-title fw-bold">Expression Data</h5>
                                <p class="card-text text-muted mb-4">
                                    miRNA expression profiles across different tissues and conditions.
                                </p>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-primary">
                                        <i class="fas fa-download me-2"></i>Download Expression
                                    </button>
                                    <small class="text-muted">~100K datasets, multiple platforms</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pathways -->
                    <div class="col-md-6">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center p-4">
                                <div class="feature-icon mb-3">
                                    <i class="fas fa-project-diagram text-primary fa-3x"></i>
                                </div>
                                <h5 class="card-title fw-bold">Pathway Data</h5>
                                <p class="card-text text-muted mb-4">
                                    Biological pathways and gene set enrichment analysis results.
                                </p>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-primary">
                                        <i class="fas fa-download me-2"></i>Download Pathways
                                    </button>
                                    <small class="text-muted">~5K pathways, multiple databases</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Custom Downloads -->
                <div class="card shadow-sm mt-4">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-cogs me-2"></i>Custom Downloads
                        </h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-3">Create custom datasets by selecting specific criteria.</p>
                        
                        <form>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="species" class="form-label">Species</label>
                                    <select class="form-select" id="species">
                                        <option value="">All Species</option>
                                        <option value="human">Human (Homo sapiens)</option>
                                        <option value="mouse">Mouse (Mus musculus)</option>
                                        <option value="rat">Rat (Rattus norvegicus)</option>
                                        <option value="zebrafish">Zebrafish (Danio rerio)</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="dataType" class="form-label">Data Type</label>
                                    <select class="form-select" id="dataType">
                                        <option value="mirna">miRNAs</option>
                                        <option value="targets">Target Genes</option>
                                        <option value="expression">Expression Data</option>
                                        <option value="pathways">Pathways</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="format" class="form-label">Format</label>
                                    <select class="form-select" id="format">
                                        <option value="csv">CSV</option>
                                        <option value="excel">Excel</option>
                                        <option value="json">JSON</option>
                                        <option value="fasta">FASTA</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="limit" class="form-label">Limit Results</label>
                                    <input type="number" class="form-control" id="limit" value="1000" min="1" max="100000">
                                </div>
                                <div class="col-12">
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-download me-2"></i>Generate Custom Download
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- API Access -->
                <div class="card shadow-sm mt-4">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-code me-2"></i>API Access
                        </h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-3">
                            For programmatic access to our data, use our RESTful API endpoints.
                        </p>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <a href="{% url 'api' %}" class="btn btn-outline-info w-100">
                                    <i class="fas fa-book me-2"></i>API Documentation
                                </a>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-info w-100">
                                    <i class="fas fa-key me-2"></i>Get API Key
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Usage Guidelines -->
                <div class="card border-0 bg-light mt-4">
                    <div class="card-body">
                        <h6 class="fw-bold mb-3">
                            <i class="fas fa-info-circle text-primary me-2"></i>Usage Guidelines
                        </h6>
                        <ul class="list-unstyled mb-0">
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                Data is provided under Creative Commons Attribution 4.0 License
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                Please cite miRGen v5 in your publications
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                Large downloads may take several minutes to process
                            </li>
                            <li class="mb-0">
                                <i class="fas fa-check text-success me-2"></i>
                                Contact us for bulk data access or commercial licensing
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Add download functionality
document.querySelectorAll('.btn-primary').forEach(btn => {
    btn.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Show loading state
        const originalText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Preparing Download...';
        this.disabled = true;
        
        // Simulate download preparation
        setTimeout(() => {
            this.innerHTML = '<i class="fas fa-check me-2"></i>Download Started';
            
            // Reset after 3 seconds
            setTimeout(() => {
                this.innerHTML = originalText;
                this.disabled = false;
            }, 3000);
        }, 2000);
    });
});

// Custom download form
document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const params = new URLSearchParams();
    
    for (let [key, value] of formData.entries()) {
        params.append(key, value);
    }
    
    // Show notification
    showNotification('Custom download request submitted. You will receive an email when ready.', 'success');
});
</script>
{% endblock %} 